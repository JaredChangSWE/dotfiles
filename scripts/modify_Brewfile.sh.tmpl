#!/bin/bash

#
# Placeholder to keep hook numbering consistent on Linux
#

set -euo pipefail

{{- if and (eq .chezmoi.os "darwin") (not .google) }}
eval "$(/opt/homebrew/bin/brew shellenv)"

BREWFILE_PATH="{{ .chezmoi.sourceDir }}/Brewfile"

echo "üì¶ Brewfile has changed - updating packages..."

cd "{{ .chezmoi.sourceDir }}"

if brew bundle --verbose --file "$BREWFILE_PATH"; then
    echo "‚úÖ Brewfile update completed successfully!"
else
    echo "‚ùå Some packages failed to install/update. Check the output above."
fi

echo "üéâ Brewfile update completed!"
{{- end }}

{{- if eq .chezmoi.os "linux" }}
echo "Brewfile modify hook is macOS-specific. Nothing to do on Linux."
{{- end }}
